<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salah Times - Manor Park Islamic Cultural Centre</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0F0F0F;
            min-height: 100vh;
            color: #E6E6E6;
        }

        .container {
            max-width: 414px;
            margin: 0 auto;
            min-height: 100vh;
            background: #181818;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2E2E2E 0%, #1A1A1A 100%);
            color: #E6E6E6;
            padding: 30px 20px 30px;
            text-align: center;
            border-bottom: 1px solid #2E2E2E;
        }

        .header h1 {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #F5F5F5;
        }

        .current-date {
            background: rgba(255, 255, 255, 0.1);
            padding: 6px 12px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .next-prayer {
            background: #1F1F1F;
            margin: 12px;
            padding: 15px;
            border-radius: 14px;
            border: 1px solid #2E2E2E;
            text-align: center;
        }

        .next-prayer h3 {
            font-size: 14px;
            color: #B8B8B8;
            margin-bottom: 6px;
        }

        .countdown {
            font-size: 26px;
            font-weight: 700;
            color: #10A37F;
            margin: 8px 0;
        }

        .prayer-name {
            font-size: 18px;
            font-weight: 600;
            color: #F5F5F5;
        }

        .today-prayers {
            margin: 0 12px 12px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 700;
            color: #F5F5F5;
            margin-bottom: 10px;
            padding-left: 5px;
        }

        .prayer-times {
            background: #1F1F1F;
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid #2E2E2E;
        }

        .prayer-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 18px;
            border-bottom: 1px solid #2E2E2E;
            transition: all 0.3s ease;
        }

        .prayer-row:last-child {
            border-bottom: none;
        }

        .prayer-row:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .prayer-row.current {
            background: linear-gradient(135deg, #10A37F, #0D8B6F);
            color: white;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .prayer-info {
            display: flex;
            align-items: center;
        }

        .prayer-icon {
            width: 30px;
            height: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 14px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .prayer-row.current .prayer-icon {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .prayer-details h4 {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 1px;
            color: inherit;
        }

        .prayer-details p {
            font-size: 11px;
            opacity: 0.7;
        }

        .prayer-time {
            font-size: 15px;
            font-weight: 700;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .jamah-time {
            font-size: 15px;
            font-weight: 700;
        }

        .begin-time {
            font-size: 10px;
            opacity: 0.6;
            font-weight: 400;
            margin-top: 1px;
        }

        .tabs {
            display: flex;
            background: #1F1F1F;
            margin: 12px;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid #2E2E2E;
        }

        .tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            background: transparent;
            border: none;
            font-size: 13px;
            font-weight: 600;
            color: #B8B8B8;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: #2E2E2E;
            color: #F5F5F5;
        }

        .tab:hover:not(.active) {
            background: rgba(255, 255, 255, 0.05);
            color: #E6E6E6;
        }

        .chart-container {
            background: #1F1F1F;
            margin: 0 20px 20px;
            padding: 25px;
            border-radius: 16px;
            border: 1px solid #2E2E2E;
            display: none;
        }

        .chart-container.active {
            display: block;
        }

        .chart-container h3 {
            color: #F5F5F5;
            margin-bottom: 15px;
        }

        .week-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            margin-top: 10px;
        }

        .day-item {
            text-align: center;
            padding: 6px 2px;
            background: #2A2A2A;
            border-radius: 8px;
            font-size: 7px;
            border: 1px solid #3A3A3A;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .day-item:hover {
            background: #353535;
        }

        .day-item.today {
            background: linear-gradient(135deg, #10A37F, #0D8B6F);
            color: white;
            border: 1px solid #10A37F;
        }

        .day-name {
            font-weight: 600;
            margin-bottom: 4px;
            color: #F5F5F5;
            font-size: 10px;
        }

        .prayer-times-mini {
            display: flex;
            flex-direction: column;
            gap: 1px;
            margin-top: 3px;
        }

        .prayer-time-mini {
            font-size: 8px;
            color: #B8B8B8;
            line-height: 1.2;
        }

        .day-item.today .prayer-time-mini {
            color: rgba(255, 255, 255, 0.9);
        }

        .monthly-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 3px;
            margin-top: 10px;
        }

        .month-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #2A2A2A;
            border-radius: 5px;
            font-size: 11px;
            font-weight: 600;
            border: 1px solid #3A3A3A;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .month-day:hover {
            background: #353535;
        }

        .month-day.today {
            background: linear-gradient(135deg, #10A37F, #0D8B6F);
            color: white;
            border: 1px solid #10A37F;
        }

        .month-day.has-data:hover {
            background: #404040;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: #1F1F1F;
            margin: 15% auto;
            padding: 25px;
            border: 1px solid #2E2E2E;
            border-radius: 16px;
            width: 85%;
            max-width: 350px;
            position: relative;
            max-height: 70vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #2E2E2E;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
            color: #F5F5F5;
        }

        .close {
            color: #B8B8B8;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
            padding: 5px;
            line-height: 1;
        }

        .close:hover {
            color: #F5F5F5;
        }

        .modal-prayer-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .modal-prayer-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #2A2A2A;
            border-radius: 12px;
            border: 1px solid #3A3A3A;
        }

        .modal-prayer-info {
            display: flex;
            align-items: center;
        }

        .modal-prayer-icon {
            font-size: 20px;
            margin-right: 12px;
        }

        .modal-prayer-name {
            font-size: 16px;
            font-weight: 600;
            color: #F5F5F5;
        }

        .modal-prayer-time {
            font-size: 16px;
            font-weight: 700;
            color: #10A37F;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .modal-jamah-time {
            font-size: 16px;
            font-weight: 700;
        }

        .modal-begin-time {
            font-size: 11px;
            opacity: 0.6;
            font-weight: 400;
            margin-top: 2px;
            color: #B8B8B8;
        }

        .footer {
            text-align: center;
            padding: 10px;
            color: #B8B8B8;
            font-size: 11px;
            border-top: 1px solid #2E2E2E;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .day-header {
            font-weight: 600;
            text-align: center;
            padding: 8px;
            color: #B8B8B8;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Shahjalal Salah Times</h1>
            <div class="current-date" id="currentDate">Sunday, July 6, 2025</div>
        </div>

        <div class="next-prayer">
            <h3>Next Prayer</h3>
            <div class="prayer-name" id="nextPrayerName">Fajr</div>
            <div class="countdown pulse" id="countdown">16:32:45</div>
        </div>

        <div class="today-prayers">
            <h2 class="section-title">Today's Prayer Times</h2>
            <div class="prayer-times" id="todayPrayers">
                <div class="prayer-row" data-prayer="fajr">
                    <div class="prayer-info">
                        <div class="prayer-icon">🌅</div>
                        <div class="prayer-details">
                            <h4>Fajr</h4>
                            <p></p>
                        </div>
                    </div>
                    <div class="prayer-time">
                        <div class="jamah-time">4:15</div>
                        <div class="begin-time">2:57</div>
                    </div>
                </div>
                <div class="prayer-row" data-prayer="zuhr">
                    <div class="prayer-info">
                        <div class="prayer-icon">☀️</div>
                        <div class="prayer-details">
                            <h4>Zuhr</h4>
                            <p></p>
                        </div>
                    </div>
                    <div class="prayer-time">
                        <div class="jamah-time">1:30</div>
                        <div class="begin-time">1:10</div>
                    </div>
                </div>
                <div class="prayer-row" data-prayer="asr">
                    <div class="prayer-info">
                        <div class="prayer-icon">🌤️</div>
                        <div class="prayer-details">
                            <h4>Asr</h4>
                            <p></p>
                        </div>
                    </div>
                    <div class="prayer-time">
                        <div class="jamah-time">7:30</div>
                        <div class="begin-time">6:40</div>
                    </div>
                </div>
                <div class="prayer-row" data-prayer="maghrib">
                    <div class="prayer-info">
                        <div class="prayer-icon">🌆</div>
                        <div class="prayer-details">
                            <h4>Maghrib</h4>
                            <p></p>
                        </div>
                    </div>
                    <div class="prayer-time">
                        <div class="jamah-time">9:26</div>
                        <div class="begin-time">9:21</div>
                    </div>
                </div>
                <div class="prayer-row" data-prayer="isha">
                    <div class="prayer-info">
                        <div class="prayer-icon">🌙</div>
                        <div class="prayer-details">
                            <h4>Isha</h4>
                            <p></p>
                        </div>
                    </div>
                    <div class="prayer-time">
                        <div class="jamah-time">10:50</div>
                        <div class="begin-time">10:37</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showChart('weekly')">Weekly</button>
            <button class="tab" onclick="showChart('monthly')">Monthly</button>
        </div>

        <div class="chart-container active" id="weeklyChart">
            <h3>This Week | 6 - 12 July</h3>
            <div class="week-grid" id="weekGrid">
                <!-- Weekly prayer times will be dynamically generated here -->
            </div>
        </div>

        <div class="chart-container" id="monthlyChart">
            <h3>This Month | July 2025</h3>
            <div class="monthly-grid" id="monthGrid">
                <div class="day-header">S</div>
                <div class="day-header">M</div>
                <div class="day-header">T</div>
                <div class="day-header">W</div>
                <div class="day-header">T</div>
                <div class="day-header">F</div>
                <div class="day-header">S</div>
                <div class="month-day"></div>
                <div class="month-day"></div>
                <div class="month-day" onclick="openDayModal(1, 7)">1</div>
                <div class="month-day" onclick="openDayModal(2, 7)">2</div>
                <div class="month-day" onclick="openDayModal(3, 7)">3</div>
                <div class="month-day" onclick="openDayModal(4, 7)">4</div>
                <div class="month-day" onclick="openDayModal(5, 7)">5</div>
                <div class="month-day today" onclick="openDayModal(6, 7)">6</div>
                <div class="month-day" onclick="openDayModal(7, 7)">7</div>
                <div class="month-day" onclick="openDayModal(8, 7)">8</div>
                <div class="month-day" onclick="openDayModal(9, 7)">9</div>
                <div class="month-day" onclick="openDayModal(10, 7)">10</div>
                <div class="month-day" onclick="openDayModal(11, 7)">11</div>
                <div class="month-day" onclick="openDayModal(12, 7)">12</div>
                <div class="month-day" onclick="openDayModal(13, 7)">13</div>
                <div class="month-day" onclick="openDayModal(14, 7)">14</div>
                <div class="month-day" onclick="openDayModal(15, 7)">15</div>
                <div class="month-day" onclick="openDayModal(16, 7)">16</div>
                <div class="month-day" onclick="openDayModal(17, 7)">17</div>
                <div class="month-day" onclick="openDayModal(18, 7)">18</div>
                <div class="month-day" onclick="openDayModal(19, 7)">19</div>
                <div class="month-day" onclick="openDayModal(20, 7)">20</div>
                <div class="month-day" onclick="openDayModal(21, 7)">21</div>
                <div class="month-day" onclick="openDayModal(22, 7)">22</div>
                <div class="month-day" onclick="openDayModal(23, 7)">23</div>
                <div class="month-day" onclick="openDayModal(24, 7)">24</div>
                <div class="month-day" onclick="openDayModal(25, 7)">25</div>
                <div class="month-day" onclick="openDayModal(26, 7)">26</div>
                <div class="month-day" onclick="openDayModal(27, 7)">27</div>
                <div class="month-day" onclick="openDayModal(28, 7)">28</div>
                <div class="month-day" onclick="openDayModal(29, 7)">29</div>
                <div class="month-day" onclick="openDayModal(30, 7)">30</div>
                <div class="month-day" onclick="openDayModal(31, 7)">31</div>
            </div>
        </div>

        <div class="footer">
            Manor Park Islamic Cultural Centre<br>
            722-726 Romford Road, London E12 6BT
        </div>
    </div>

    <!-- Modal for Day Details -->
    <div id="dayModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Prayer Times</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-prayer-list" id="modalPrayerList">
                <!-- Prayer times will be populated here -->
            </div>
        </div>
    </div>

    <script>
        // Prayer times data for July 2025 with corrected Maghrib Jamah times
        const prayerData = {
            7: {
                1: { fajr: { jamah: "4:00", begin: "2:51" }, zuhr: { jamah: "1:30", begin: "1:10" }, asr: { jamah: "7:30", begin: "6:41" }, maghrib: { jamah: "9:29", begin: "9:24" }, isha: { jamah: "11:00", begin: "10:41" } },
                2: { fajr: { jamah: "4:00", begin: "2:52" }, zuhr: { jamah: "1:30", begin: "1:10" }, asr: { jamah: "7:30", begin: "6:41" }, maghrib: { jamah: "9:28", begin: "9:23" }, isha: { jamah: "11:00", begin: "10:41" } },
                3: { fajr: { jamah: "4:00", begin: "2:53" }, zuhr: { jamah: "1:30", begin: "1:10" }, asr: { jamah: "7:30", begin: "6:41" }, maghrib: { jamah: "9:28", begin: "9:23" }, isha: { jamah: "11:00", begin: "10:40" } },
                4: { fajr: { jamah: "4:00", begin: "2:54" }, zuhr: { jamah: "1:30", begin: "1:10" }, asr: { jamah: "7:30", begin: "6:40" }, maghrib: { jamah: "9:27", begin: "9:22" }, isha: { jamah: "11:00", begin: "10:39" } },
                5: { fajr: { jamah: "4:00", begin: "2:55" }, zuhr: { jamah: "1:30", begin: "1:10" }, asr: { jamah: "7:30", begin: "6:40" }, maghrib: { jamah: "9:27", begin: "9:22" }, isha: { jamah: "11:00", begin: "10:38" } },
                6: { fajr: { jamah: "4:15", begin: "2:57" }, zuhr: { jamah: "1:30", begin: "1:10" }, asr: { jamah: "7:30", begin: "6:40" }, maghrib: { jamah: "9:26", begin: "9:21" }, isha: { jamah: "10:50", begin: "10:37" } },
                7: { fajr: { jamah: "4:15", begin: "2:58" }, zuhr: { jamah: "1:30", begin: "1:11" }, asr: { jamah: "7:30", begin: "6:40" }, maghrib: { jamah: "9:26", begin: "9:21" }, isha: { jamah: "10:50", begin: "10:36" } },
                8: { fajr: { jamah: "4:15", begin: "2:59" }, zuhr: { jamah: "1:30", begin: "1:11" }, asr: { jamah: "7:30", begin: "6:40" }, maghrib: { jamah: "9:25", begin: "9:20" }, isha: { jamah: "10:50", begin: "10:35" } },
                9: { fajr: { jamah: "4:15", begin: "3:00" }, zuhr: { jamah: "1:30", begin: "1:11" }, asr: { jamah: "7:30", begin: "6:39" }, maghrib: { jamah: "9:24", begin: "9:19" }, isha: { jamah: "10:50", begin: "10:34" } },
                10: { fajr: { jamah: "4:15", begin: "3:02" }, zuhr: { jamah: "1:30", begin: "1:11" }, asr: { jamah: "7:30", begin: "6:39" }, maghrib: { jamah: "9:23", begin: "9:18" }, isha: { jamah: "10:50", begin: "10:33" } },
                11: { fajr: { jamah: "4:15", begin: "3:03" }, zuhr: { jamah: "1:30", begin: "1:11" }, asr: { jamah: "7:30", begin: "6:39" }, maghrib: { jamah: "9:23", begin: "9:18" }, isha: { jamah: "10:50", begin: "10:32" } },
                12: { fajr: { jamah: "4:15", begin: "3:04" }, zuhr: { jamah: "1:30", begin: "1:11" }, asr: { jamah: "7:30", begin: "6:38" }, maghrib: { jamah: "9:22", begin: "9:17" }, isha: { jamah: "10:50", begin: "10:31" } },
                13: { fajr: { jamah: "4:15", begin: "3:06" }, zuhr: { jamah: "1:30", begin: "1:11" }, asr: { jamah: "7:30", begin: "6:38" }, maghrib: { jamah: "9:21", begin: "9:16" }, isha: { jamah: "10:45", begin: "10:30" } },
                14: { fajr: { jamah: "4:15", begin: "3:07" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:37" }, maghrib: { jamah: "9:20", begin: "9:15" }, isha: { jamah: "10:45", begin: "10:28" } },
                15: { fajr: { jamah: "4:15", begin: "3:09" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:37" }, maghrib: { jamah: "9:19", begin: "9:14" }, isha: { jamah: "10:45", begin: "10:27" } },
                16: { fajr: { jamah: "4:15", begin: "3:10" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:36" }, maghrib: { jamah: "9:18", begin: "9:13" }, isha: { jamah: "10:45", begin: "10:26" } },
                17: { fajr: { jamah: "4:15", begin: "3:12" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:36" }, maghrib: { jamah: "9:17", begin: "9:12" }, isha: { jamah: "10:45", begin: "10:24" } },
                18: { fajr: { jamah: "4:15", begin: "3:13" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:35" }, maghrib: { jamah: "9:16", begin: "9:11" }, isha: { jamah: "10:45", begin: "10:23" } },
                19: { fajr: { jamah: "4:15", begin: "3:15" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:35" }, maghrib: { jamah: "9:14", begin: "9:09" }, isha: { jamah: "10:45", begin: "10:21" } },
                20: { fajr: { jamah: "4:30", begin: "3:16" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:34" }, maghrib: { jamah: "9:13", begin: "9:08" }, isha: { jamah: "10:35", begin: "10:20" } },
                21: { fajr: { jamah: "4:30", begin: "3:18" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:33" }, maghrib: { jamah: "9:12", begin: "9:07" }, isha: { jamah: "10:35", begin: "10:18" } },
                22: { fajr: { jamah: "4:30", begin: "3:20" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:33" }, maghrib: { jamah: "9:11", begin: "9:06" }, isha: { jamah: "10:35", begin: "10:17" } },
                23: { fajr: { jamah: "4:30", begin: "3:21" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:32" }, maghrib: { jamah: "9:09", begin: "9:04" }, isha: { jamah: "10:35", begin: "10:15" } },
                24: { fajr: { jamah: "4:30", begin: "3:23" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:31" }, maghrib: { jamah: "9:08", begin: "9:03" }, isha: { jamah: "10:35", begin: "10:13" } },
                25: { fajr: { jamah: "4:30", begin: "3:25" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:30" }, maghrib: { jamah: "9:07", begin: "9:02" }, isha: { jamah: "10:35", begin: "10:12" } },
                26: { fajr: { jamah: "4:30", begin: "3:26" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:29" }, maghrib: { jamah: "9:05", begin: "9:00" }, isha: { jamah: "10:25", begin: "10:10" } },
                27: { fajr: { jamah: "4:30", begin: "3:28" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:29" }, maghrib: { jamah: "9:04", begin: "8:59" }, isha: { jamah: "10:25", begin: "10:08" } },
                28: { fajr: { jamah: "4:30", begin: "3:30" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:28" }, maghrib: { jamah: "9:02", begin: "8:57" }, isha: { jamah: "10:25", begin: "10:06" } },
                29: { fajr: { jamah: "4:30", begin: "3:32" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:27" }, maghrib: { jamah: "9:01", begin: "8:56" }, isha: { jamah: "10:25", begin: "10:04" } },
                30: { fajr: { jamah: "4:30", begin: "3:33" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:26" }, maghrib: { jamah: "8:59", begin: "8:54" }, isha: { jamah: "10:25", begin: "10:03" } },
                31: { fajr: { jamah: "4:30", begin: "3:35" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:25" }, maghrib: { jamah: "8:57", begin: "8:52" }, isha: { jamah: "10:25", begin: "10:01" } }
            },
            6: {
                29: { fajr: { jamah: "4:30", begin: "3:32" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:27" }, maghrib: { jamah: "9:01", begin: "8:56" }, isha: { jamah: "10:25", begin: "10:04" } },
                30: { fajr: { jamah: "4:30", begin: "3:33" }, zuhr: { jamah: "1:30", begin: "1:12" }, asr: { jamah: "7:30", begin: "6:26" }, maghrib: { jamah: "8:59", begin: "8:54" }, isha: { jamah: "10:25", begin: "10:03" } }
            }
        };

        const prayerNames = ['Fajr', 'Zuhr', 'Asr', 'Maghrib', 'Isha'];
        const prayerIcons = ['🌅', '☀️', '🌤️', '🌆', '🌙'];

        function showChart(type) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            document.querySelectorAll('.chart-container').forEach(chart => chart.classList.remove('active'));
            
            if (type === 'weekly') {
                document.getElementById('weeklyChart').classList.add('active');
            } else {
                document.getElementById('monthlyChart').classList.add('active');
            }
        }

        function openDayModal(day, month) {
            const dayTimes = prayerData[month] && prayerData[month][day];
            if (!dayTimes) return;
            
            const date = new Date(2025, month - 1, day);
            const dateStr = date.toLocaleDateString('en-US', { 
                weekday: 'long', 
                month: 'long', 
                day: 'numeric' 
            });
            
            document.getElementById('modalTitle').textContent = dateStr;
            
            const prayerList = document.getElementById('modalPrayerList');
            prayerList.innerHTML = '';
            
            const prayerKeys = ['fajr', 'zuhr', 'asr', 'maghrib', 'isha'];
            
            prayerKeys.forEach((prayer, index) => {
                const prayerItem = document.createElement('div');
                prayerItem.className = 'modal-prayer-item';
                prayerItem.innerHTML = `
                    <div class="modal-prayer-info">
                        <span class="modal-prayer-icon">${prayerIcons[index]}</span>
                        <span class="modal-prayer-name">${prayerNames[index]}</span>
                    </div>
                    <div class="modal-prayer-time">
                        <div class="modal-jamah-time">${dayTimes[prayer].jamah}</div>
                        <div class="modal-begin-time">${dayTimes[prayer].begin}</div>
                    </div>
                `;
                prayerList.appendChild(prayerItem);
            });
            
            document.getElementById('dayModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('dayModal').style.display = 'none';
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            const modal = document.getElementById('dayModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        function generateWeeklyView() {
            const now = new Date();
            const weekGrid = document.getElementById('weekGrid');
            const weekTitle = document.querySelector('#weeklyChart h3');
            
            if (!weekGrid || !weekTitle) {
                return;
            }
            
            // Calculate start and end dates for the week
            const startDate = new Date(now);
            const endDate = new Date(now);
            endDate.setDate(endDate.getDate() + 6);
            
            // Update week title
            const startStr = startDate.getDate();
            const endStr = endDate.getDate();
            const monthStr = startDate.toLocaleDateString('en-US', { month: 'long' });
            weekTitle.textContent = `This Week | ${startStr} - ${endStr} ${monthStr}`;
            
            // Clear existing grid
            weekGrid.innerHTML = '';
            
            // Generate 7 days starting from today
            for (let i = 0; i < 7; i++) {
                const currentDate = new Date(now);
                currentDate.setDate(currentDate.getDate() + i);
                
                const day = currentDate.getDate();
                const month = currentDate.getMonth() + 1;
                const dayName = currentDate.toLocaleDateString('en-US', { weekday: 'short' });
                
                // Get prayer times for this day
                const dayTimes = prayerData[month] && prayerData[month][day];
                
                const dayItem = document.createElement('div');
                dayItem.className = `day-item ${i === 0 ? 'today' : ''}`;
                dayItem.setAttribute('onclick', `openDayModal(${day}, ${month})`);
                
                if (dayTimes) {
                    dayItem.innerHTML = `
                        <div class="day-name">${dayName}</div>
                        <div style="font-weight: 600; margin-bottom: 3px;">${day}</div>
                        <div class="prayer-times-mini">
                            <div class="prayer-time-mini">F: ${dayTimes.fajr.jamah}</div>
                            <div class="prayer-time-mini">Z: ${dayTimes.zuhr.jamah}</div>
                            <div class="prayer-time-mini">A: ${dayTimes.asr.jamah}</div>
                            <div class="prayer-time-mini">M: ${dayTimes.maghrib.jamah}</div>
                            <div class="prayer-time-mini">I: ${dayTimes.isha.jamah}</div>
                        </div>
                    `;
                } else {
                    dayItem.innerHTML = `
                        <div class="day-name">${dayName}</div>
                        <div style="font-weight: 600; margin-bottom: 3px;">${day}</div>
                        <div class="prayer-times-mini">
                            <div class="prayer-time-mini">No data</div>
                        </div>
                    `;
                }
                
                weekGrid.appendChild(dayItem);
            }
        }

        // Convert prayer time to minutes, accounting for AM/PM
        function prayerTimeToMinutes(timeStr, prayerName) {
            const [hours, minutes] = timeStr.split(':').map(Number);
            
            // Fajr is always AM (early morning)
            if (prayerName === 'fajr') {
                return hours * 60 + minutes;
            }
            
            // All other prayers are PM
            // For 12-hour format times that show as single digit or are clearly PM
            if (hours >= 1 && hours <= 11) {
                return (hours + 12) * 60 + minutes; // Convert to 24-hour format
            }
            
            // If it's already in 24-hour format or is 12 PM
            return hours * 60 + minutes;
        }

        // Update countdown every second
        function updateCountdown() {
            const now = new Date();
            const today = now.getDate();
            const month = now.getMonth() + 1;
            
            // Get today's prayer times from the data
            const todayTimes = prayerData[month] && prayerData[month][today] ? prayerData[month][today] : {
                fajr: { jamah: "4:15", begin: "2:57" },
                zuhr: { jamah: "1:30", begin: "1:10" },
                asr: { jamah: "7:30", begin: "6:40" },
                maghrib: { jamah: "9:26", begin: "9:21" },
                isha: { jamah: "10:50", begin: "10:37" }
            };

            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();
            const currentTimeInMinutes = currentHour * 60 + currentMinute;

            // Convert begin times to minutes for comparison with proper AM/PM handling
            const beginTimes = [
                { name: 'Fajr', time: prayerTimeToMinutes(todayTimes.fajr.begin, 'fajr'), timeStr: todayTimes.fajr.begin },
                { name: 'Zuhr', time: prayerTimeToMinutes(todayTimes.zuhr.begin, 'zuhr'), timeStr: todayTimes.zuhr.begin },
                { name: 'Asr', time: prayerTimeToMinutes(todayTimes.asr.begin, 'asr'), timeStr: todayTimes.asr.begin },
                { name: 'Maghrib', time: prayerTimeToMinutes(todayTimes.maghrib.begin, 'maghrib'), timeStr: todayTimes.maghrib.begin },
                { name: 'Isha', time: prayerTimeToMinutes(todayTimes.isha.begin, 'isha'), timeStr: todayTimes.isha.begin }
            ];

            let nextPrayerTime = null;
            let nextPrayerName = null;

            // Find next begin time today
            for (let begin of beginTimes) {
                if (currentTimeInMinutes < begin.time) {
                    nextPrayerTime = parseTime(begin.timeStr, begin.name.toLowerCase());
                    nextPrayerName = begin.name;
                    break;
                }
            }

            // If no next prayer today, use tomorrow's Fajr
            if (!nextPrayerTime) {
                const tomorrow = new Date(now);
                tomorrow.setDate(tomorrow.getDate() + 1);
                const tomorrowDay = tomorrow.getDate();
                const tomorrowMonth = tomorrow.getMonth() + 1;
                const tomorrowTimes = prayerData[tomorrowMonth] && prayerData[tomorrowMonth][tomorrowDay];
                const tomorrowFajrBegin = tomorrowTimes ? tomorrowTimes.fajr.begin : "2:57";
                
                nextPrayerTime = parseTime(tomorrowFajrBegin, 'fajr');
                nextPrayerTime.setDate(nextPrayerTime.getDate() + 1);
                nextPrayerName = 'Fajr';
            }

            // Update prayer name in next prayer section
            document.getElementById('nextPrayerName').textContent = nextPrayerName;

            const timeDiff = nextPrayerTime - now;
            
            if (timeDiff > 0) {
                const hours = Math.floor(timeDiff / (1000 * 60 * 60));
                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
                
                document.getElementById('countdown').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
            
            // Update prayer highlighting
            updatePrayerHighlighting();
        }

        function updatePrayerHighlighting() {
            const now = new Date();
            const today = now.getDate();
            const month = now.getMonth() + 1;
            
            // Get today's prayer times from the data
            const todayTimes = prayerData[month] && prayerData[month][today] ? prayerData[month][today] : {
                fajr: { jamah: "4:15", begin: "2:57" },
                zuhr: { jamah: "1:30", begin: "1:10" },
                asr: { jamah: "7:30", begin: "6:40" },
                maghrib: { jamah: "9:26", begin: "9:21" },
                isha: { jamah: "10:50", begin: "10:37" }
            };

            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();
            const currentTimeInMinutes = currentHour * 60 + currentMinute;

            // Convert prayer begin times to minutes with proper AM/PM handling
            const fajrBeginMinutes = prayerTimeToMinutes(todayTimes.fajr.begin, 'fajr');
            const zuhrBeginMinutes = prayerTimeToMinutes(todayTimes.zuhr.begin, 'zuhr');
            const asrBeginMinutes = prayerTimeToMinutes(todayTimes.asr.begin, 'asr');
            const maghribBeginMinutes = prayerTimeToMinutes(todayTimes.maghrib.begin, 'maghrib');
            const ishaBeginMinutes = prayerTimeToMinutes(todayTimes.isha.begin, 'isha');

            // Determine current prayer based on time
            let currentPrayer = null;

            if (currentTimeInMinutes >= fajrBeginMinutes && currentTimeInMinutes < zuhrBeginMinutes) {
                currentPrayer = 'Fajr';
            } else if (currentTimeInMinutes >= zuhrBeginMinutes && currentTimeInMinutes < asrBeginMinutes) {
                currentPrayer = 'Zuhr';
            } else if (currentTimeInMinutes >= asrBeginMinutes && currentTimeInMinutes < maghribBeginMinutes) {
                currentPrayer = 'Asr';
            } else if (currentTimeInMinutes >= maghribBeginMinutes && currentTimeInMinutes < ishaBeginMinutes) {
                currentPrayer = 'Maghrib';
            } else if (currentTimeInMinutes >= ishaBeginMinutes || currentTimeInMinutes < fajrBeginMinutes) {
                // Isha continues until next day's Fajr
                currentPrayer = 'Isha';
            }

            // Remove existing classes
            document.querySelectorAll('.prayer-row').forEach(row => {
                row.classList.remove('current');
                const statusElement = row.querySelector('.prayer-details p');
                statusElement.textContent = '';
            });

            // Add current prayer highlighting (green) only
            if (currentPrayer) {
                const currentRow = document.querySelector(`[data-prayer="${currentPrayer.toLowerCase()}"]`);
                if (currentRow) {
                    currentRow.classList.add('current');
                    const statusElement = currentRow.querySelector('.prayer-details p');
                    statusElement.textContent = 'Current Prayer';
                }
            }

            // Update today's prayer times in the display
            updateTodaysPrayerTimes();
        }

        function updateTodaysPrayerTimes() {
            const now = new Date();
            const today = now.getDate();
            const month = now.getMonth() + 1;
            
            const todayTimes = prayerData[month] && prayerData[month][today];
            if (todayTimes) {
                const prayerRows = document.querySelectorAll('.prayer-row');
                const prayers = ['fajr', 'zuhr', 'asr', 'maghrib', 'isha'];
                
                prayers.forEach((prayer, index) => {
                    const row = prayerRows[index];
                    const jamahTime = row.querySelector('.jamah-time');
                    const beginTime = row.querySelector('.begin-time');
                    
                    jamahTime.textContent = todayTimes[prayer].jamah;
                    beginTime.textContent = todayTimes[prayer].begin;
                });
            }
        }

        function parseTime(timeStr, prayerName) {
            const [hours, minutes] = timeStr.split(':').map(Number);
            const date = new Date();
            
            // Fajr is always AM (early morning)
            if (prayerName === 'fajr') {
                date.setHours(hours, minutes, 0, 0);
            } else {
                // All other prayers are PM
                // Convert to 24-hour format if needed
                if (hours >= 1 && hours <= 11) {
                    date.setHours(hours + 12, minutes, 0, 0);
                } else {
                    date.setHours(hours, minutes, 0, 0);
                }
            }
            
            return date;
        }

        // Initialize the app
        function init() {
            // Update current date
            const now = new Date();
            const dateStr = now.toLocaleDateString('en-US', { 
                weekday: 'long', 
                month: 'long', 
                day: 'numeric',
                year: 'numeric'
            });
            document.getElementById('currentDate').textContent = dateStr;
            
            // Update monthly chart title with current month
            const monthlyTitle = document.querySelector('#monthlyChart h3');
            const monthYear = now.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            monthlyTitle.textContent = `This Month | ${monthYear}`;
            
            // Generate dynamic weekly view
            generateWeeklyView();
            
            // Start countdown and update functions
            updateCountdown();
            setInterval(updateCountdown, 1000);
        }

        // Start the app when page loads
        document.addEventListener('DOMContentLoaded', function() {
            init();
        });
        
        // Also call init if DOMContentLoaded already fired
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>
